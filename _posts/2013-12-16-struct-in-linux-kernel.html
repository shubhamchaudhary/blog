---
layout: post
title: Structs in Linux Kernel
subtitle: While looking into Linux kernel source code, I stumbled upon some funky looking code.
date: '2013-12-16T17:26:00.000+05:30'
author: Shubham Chaudhary
comments: true
tags:
- c++
- array
- linux-kernel
- class
- gcc
- structure
- identifier
- variable
- struct
- c#
- c
- call
- gnu
- typedef
- what is
- linux
- dot
- kernel
- cpp
- explain
modified_time: '2014-01-05T04:10:59.560+05:30'
blogger_id: tag:blogger.com,1999:blog-9099562319457234872.post-3517190721845179090
blogger_orig_url: http://www.developfreedom.org/2013/12/struct-in-linux-kernel.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">Well here is a question for you all.<br />Whenever I look at any source file of linux-kernel, I usually find some code similar to the one shown below.<br />What is going on here in&nbsp;<a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/drivers/scsi/qla4xxx/ql4_os.c#n196" target="_blank">this piece of code</a>?<br /><br /><!-- HTML code --><br /><div style="background: #f8f8f8; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #aa22ff; font-weight: bold;">static</span> <span style="color: #aa22ff; font-weight: bold;">struct</span> scsi_host_template qla4xxx_driver_template <span style="color: #666666;">=</span> {<br /> .module   <span style="color: #666666;">=</span> THIS_MODULE,<br /> .name   <span style="color: #666666;">=</span> DRIVER_NAME,<br /> .proc_name  <span style="color: #666666;">=</span> DRIVER_NAME,<br /> .queuecommand  <span style="color: #666666;">=</span> qla4xxx_queuecommand,<br /><br /> .eh_abort_handler <span style="color: #666666;">=</span> qla4xxx_eh_abort,<br /> .eh_device_reset_handler <span style="color: #666666;">=</span> qla4xxx_eh_device_reset,<br /> .eh_target_reset_handler <span style="color: #666666;">=</span> qla4xxx_eh_target_reset,<br /> .eh_host_reset_handler <span style="color: #666666;">=</span> qla4xxx_eh_host_reset,<br /> .eh_timed_out  <span style="color: #666666;">=</span> qla4xxx_eh_cmd_timed_out,<br /><br /> .slave_configure <span style="color: #666666;">=</span> qla4xxx_slave_configure,<br /> .slave_alloc  <span style="color: #666666;">=</span> qla4xxx_slave_alloc,<br /> .slave_destroy  <span style="color: #666666;">=</span> qla4xxx_slave_destroy,<br /> .change_queue_depth <span style="color: #666666;">=</span> qla4xxx_change_queue_depth,<br /><br /> .this_id  <span style="color: #666666;">=</span> <span style="color: #666666;">-1</span>,<br /> .cmd_per_lun  <span style="color: #666666;">=</span> <span style="color: #666666;">3</span>,<br /> .use_clustering  <span style="color: #666666;">=</span> ENABLE_CLUSTERING,<br /> .sg_tablesize  <span style="color: #666666;">=</span> SG_ALL,<br /><br /> .max_sectors  <span style="color: #666666;">=</span> <span style="color: #666666;">0xFFFF</span>,<br /> .shost_attrs  <span style="color: #666666;">=</span> qla4xxx_host_attrs,<br /> .host_reset  <span style="color: #666666;">=</span> qla4xxx_host_reset,<br /> .vendor_id  <span style="color: #666666;">=</span> SCSI_NL_VID_TYPE_PCI <span style="color: #666666;">|</span> PCI_VENDOR_ID_QLOGIC,<br />};<br /></pre></td></tr></tbody></table></div><br /><br />These are called <b>designated initializer</b> for structs.<br /><div style="font-family: Arial, sans-serif; font-size: 13px;"><br /></div><div><div style="font-family: Arial, sans-serif; font-size: 13px;">An initializer for a structure is a brace-enclosed comma-separated list of values, and for a union, a brace-enclosed single value. The initializer is preceded by an equal sign (<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">=</tt>).</div><div style="font-family: Arial, sans-serif; font-size: 13px;">C99 and C++ allow the initializer for an automatic member variable of a union or structure type to be a constant or non-constant expression.</div><div style="font-family: Arial, sans-serif; font-size: 13px;">There are two ways to specify initializers for structures and unions:</div><ul style="font-family: Arial, sans-serif; font-size: 13px; margin-bottom: 0.1em; margin-top: 0.1em; padding-bottom: 0.1em; padding-top: 0.1em;"><li style="margin-bottom: 0em; margin-left: 0em; margin-top: 0em;">With C89-style initializers, structure members must be initialized in the order declared, and only the first member of a union can be initialized.</li></ul><div style="font-family: Arial, sans-serif; font-size: 13px;"><br class="Apple-interchange-newline" />Using C89-style initialization, the following example shows how you would initialize the first union member&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">birthday</tt>&nbsp;of the union variable&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">people</tt>:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">union {<br />      char birthday[9];<br />      int age;<br />      float weight;<br />      } people = {"23/07/57"};</pre><div><br /></div><ul style="font-family: Arial, sans-serif; font-size: 13px; margin-bottom: 0.1em; margin-top: 0.1em; padding-bottom: 0.1em; padding-top: 0.1em;"><li style="margin-bottom: 0em; margin-left: 0em; margin-top: 0em;"><img alt="C only" src="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/ngclang.gif" />&nbsp;Using&nbsp;<span class="italic" style="font-style: italic;">designated</span>&nbsp;initializers, a C99 feature which allows you to&nbsp;<span class="italic" style="font-style: italic;">name</span>&nbsp;members to be initialized, structure members can be initialized in any order, and any (single) member of a union can be initialized.</li></ul><div><div class="qualifstart" style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-width: thin; font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; margin-bottom: 0.2em; margin-top: 0.2em; padding: 0.1em 0.5em 0.5em; text-align: center;"><br class="Apple-interchange-newline" />C only</div><div style="font-family: Arial, sans-serif; font-size: 13px;">Using a designated initializer in the same example, the following initializes the second union member&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">age</tt>&nbsp;:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">union {<br />      char birthday[9];<br />      int age;<br />      float weight;<br />      } people = { .age = 14 };</pre><div class="qualifend" style="border-bottom-style: solid; border-left-style: solid; border-right-style: solid; border-width: thin; font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; margin-bottom: 0.2em; padding: 0.5em 0.5em 0.1em; text-align: center;">End of C only</div></div><div><br /></div><div style="font-family: Arial, sans-serif; font-size: 13px;"><br /></div><div style="font-family: Arial, sans-serif;"><span class="italic" style="font-style: italic;">Designated initializers</span><span style="font-size: x-small;">, a C99 feature, are supported for aggregate types, including arrays, structures, and unions. A designated initializer, or&nbsp;</span><span class="italic" style="font-size: 13px; font-style: italic;">designator</span><span style="font-size: x-small;">, points out a particular element to be initialized. A&nbsp;</span><span class="italic" style="font-size: 13px; font-style: italic;">designator list</span><span style="font-size: x-small;">&nbsp;is a comma-separated list of one or more designators. A designator list followed by an equal sign constitutes a&nbsp;</span><span class="italic" style="font-size: 13px; font-style: italic;">designation</span><span style="font-size: x-small;">.</span></div><div style="font-family: Arial, sans-serif; font-size: 13px;">Designated initializers allow for the following flexibility:</div><ul style="font-family: Arial, sans-serif; font-size: 13px; margin-bottom: 0.1em; margin-top: 0.1em; padding-bottom: 0.1em; padding-top: 0.1em;"><li style="margin-bottom: 0em; margin-left: 0em; margin-top: 0em;">Elements within an aggregate can be initialized in any order.</li><li style="margin-bottom: 0em; margin-left: 0em; margin-top: 0em;">The initializer list can omit elements that are declared anywhere in the aggregate, rather than only at the end.&nbsp;Elements that are omitted are initialized as if they are static objects: arithmetic types are initialized to 0; pointers are initialized to NULL.</li><li style="margin-bottom: 0em; margin-left: 0em; margin-top: 0em;">Where inconsistent or incomplete bracketing of initializers for multi-dimensional arrays or nested aggregates may be difficult to understand, designators can more clearly identify the element or member to be initialized.</li></ul><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;"></div><pre class="cgraphic" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;"><img alt="Read syntax diagram" border="0" longdesc="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/languagesyn45.htm" src="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/c.gif" /><a href="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/designators.htm#skipsyn-44" style="color: #996699;"><img alt="Skip visual syntax diagram" border="0" src="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/c.gif" /></a>Designator list syntax for structures and unions<br /> <br />      .-,------------------------.<br />      V                          |<br />&gt;&gt;-{----.--<span class="italic" style="font-style: italic;">member</span>--=--<span class="italic" style="font-style: italic;">expression</span>-+--}--------------------------&gt;&lt;<br /> <br /></pre><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;"></div><pre class="cgraphic" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;"><img alt="Read syntax diagram" border="0" longdesc="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/languagesyn46.htm" src="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/c.gif" /><a href="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/designators.htm#skipsyn-45" style="color: #996699;"><img alt="Skip visual syntax diagram" border="0" src="https://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/c.gif" /></a>Designator list syntax for arrays<br /> <br />      .-,----------------------------------------.<br />      | .-----------------------.                |<br />      V V                       |                |<br />&gt;&gt;-{------[--<span class="italic" style="font-style: italic;">array subscript</span>--]-+--=--<span class="italic" style="font-style: italic;">expression</span>-+--}----------&gt;&lt;<br /> <br /></pre><div style="font-family: Arial, sans-serif; font-size: 13px;">In the following example, the designator is&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">.any_member</tt>&nbsp;and the designated initializer is&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">.any_member = 13</tt>:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">union { /* ... */ } caw = { .any_member = 13 };</pre><div style="font-family: Arial, sans-serif; font-size: 13px;">The following example shows how the second and third members&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">b</tt>&nbsp;and&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">c</tt>&nbsp;of structure variable&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">klm</tt>&nbsp;are initialized with designated initializers:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">struct xyz {<br />       int a;<br />       int b;<br />       int c;<br />       } klm = { .a = 99, .c = 100 };</pre><div style="font-family: Arial, sans-serif; font-size: 13px;">In the following example, the third and second elements of the one-dimensional array&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">aa</tt>&nbsp;are initialized to&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">3</tt>&nbsp;and&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">6</tt>, respectively:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">int aa[4] = { [2] = 3, [1] = 6 };</pre><div style="font-family: Arial, sans-serif; font-size: 13px;">The following example initializes the first four and last four elements, while omitting the middle four:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">      static short grid[3] [4] = { [0][0]=8, [0][1]=6,<br />                                   [0][2]=4, [0][3]=1,<br />                                   [2][0]=9, [2][1]=3,<br />                                   [2][2]=1, [2][3]=1 };</pre><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;">The omitted four elements of&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid</tt>&nbsp;are initialized to zero:</div><div style="font-family: Arial, sans-serif; font-size: 13px;"></div><table border="1" frame="border" id="wq113" rules="none" style="background-color: white; border-collapse: collapse; border-color: black; color: black; font-family: Arial, sans-serif; font-size: 13px; margin: 0.5em 0em; width: 100%px;" summary=""><thead valign="bottom"><tr><th align="left" id="wq114" style="background-color: #dadada; font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top" width="37%">Element</th><th align="left" id="wq115" style="background-color: #dadada; font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top" width="11%">Value</th><th align="left" id="wq116" style="background-color: #dadada; font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top" width="37%">Element</th><th align="left" id="wq117" style="background-color: #dadada; font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top" width="13%">Value</th></tr></thead><tbody valign="top"><tr><td headers="wq114" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[0] [0]</tt></td><td headers="wq115" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">8</td><td headers="wq116" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[1] [2]</tt></td><td headers="wq117" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">0</td></tr><tr><td headers="wq114" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[0] [1]</tt></td><td headers="wq115" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">6</td><td headers="wq116" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[1] [3]</tt></td><td headers="wq117" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">0</td></tr><tr><td headers="wq114" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[0] [2]</tt></td><td headers="wq115" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">4</td><td headers="wq116" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[2] [0]</tt></td><td headers="wq117" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">9</td></tr><tr><td headers="wq114" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[0] [3]</tt></td><td headers="wq115" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">1</td><td headers="wq116" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[2] [1]</tt></td><td headers="wq117" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">3</td></tr><tr><td headers="wq114" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[1] [0]</tt></td><td headers="wq115" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">0</td><td headers="wq116" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[2] [2]</tt></td><td headers="wq117" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">1</td></tr><tr><td headers="wq114" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[1] [1]</tt></td><td headers="wq115" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">0</td><td headers="wq116" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">grid[2] [3]</tt></td><td headers="wq117" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;" valign="top">1</td></tr></tbody></table><div style="font-family: Arial, sans-serif; font-size: 13px;">Designated initializers can be combined with regular initializers, as in the following example:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">int a[10] = {2, 4, [8]=9, 10}</pre><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;">In this example,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[0]</tt>&nbsp;is initialized to&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">2</tt>,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[1]</tt>&nbsp;is initialized to&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">4</tt>,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[2]</tt>&nbsp;to&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[7]</tt>&nbsp;are initialized to 0, and&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[9]</tt>&nbsp;is initialized to&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">10</tt>.</div><div style="font-family: Arial, sans-serif; font-size: 13px;">In the following example, a single designator is used to "allocate" space from both ends of an array:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">int a[MAX] = {<br />      1, 3, 5, 7, 9, [MAX-5] = 8, 6, 4, 2, 0<br />};</pre><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;">The designated initializer,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">[MAX-5] = 8</tt>, means that the array element at subscript&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">MAX-5</tt>&nbsp;should be initialized to the value&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">8</tt>. If&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">MAX</tt>&nbsp;is&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">15</tt>,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[5]</tt>&nbsp;through<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[9]</tt>&nbsp;will be initialized to zero. If&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">MAX</tt>&nbsp;is&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">7</tt>,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[2]</tt>&nbsp;through&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">a[4]</tt>&nbsp;will first have the values&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">5</tt>,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">7</tt>, and&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">9</tt>, respectively, which are overridden by the values&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">8</tt>,&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">6</tt>, and<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">4</tt>. In other words, if&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">MAX</tt>&nbsp;is 7, the initialization would be the same as if the declaration had been written:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">int a[MAX] = {<br />      1, 3, 8, 6, 4, 2, 0<br />};</pre><div style="font-family: Arial, sans-serif; font-size: 13px;">You can also use designators to represent members of nested structures. For example:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">struct a {<br />         struct b {<br />              int c;<br />              int d;<br />          } e;<br />         float f;<br />} g = {.e.c = 3 };<br /></pre><div style="font-family: 'Times New Roman'; font-size: medium;"><a href="" id="skipsyn-44" name="skipsyn-44" style="font-family: Arial, sans-serif; font-size: 13px;"></a><a href="" id="skipsyn-45" name="skipsyn-45" style="font-family: Arial, sans-serif; font-size: 13px;"></a><span style="background-color: white; font-family: Arial, sans-serif; font-size: 13px;"></span><a href="" name="wq113" style="font-family: Arial, sans-serif; font-size: 13px;"></a><span style="background-color: white; font-family: Arial, sans-serif; font-size: 13px;"></span></div><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;">initializes member&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">c</tt>&nbsp;of structure variable&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">e</tt>, which is a member of structure variable&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">g</tt>, to the value of 3.</div><div style="font-family: Arial, sans-serif; font-size: 13px;"><br /></div><div style="font-family: Arial, sans-serif; font-size: 13px;">Unnamed structure or union members do not participate in initialization and have indeterminate value after initialization. Therefore, in the following example, the bit field is not initialized, and the initializer&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">3</tt>&nbsp;is applied to member&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">b</tt>:</div></div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">struct {<br />     int a;<br />     int :10;<br />     int b;<br />     } w = { 2, 3 };</pre><div style="font-family: Arial, sans-serif; font-size: 13px;">The default initializer for a union with static storage is the default for the first component; a union with automatic storage has no default initialization.</div><div style="font-family: Arial, sans-serif; font-size: 13px;">The following definition shows a partially initialized structure:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">struct address {<br />                 int street_no;<br />                 char *street_name;<br />                 char *city;<br />                 char *prov;<br />                 char *postal_code;<br />               };<br />struct address temp_address =<br />               { 44, "Knyvet Ave.", "Hamilton", "Ontario" };</pre><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;">The values of&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address</tt>&nbsp;are:</div><table border="1" frame="border" id="wq121" rules="all" style="background-color: white; border-collapse: collapse; border-color: black; color: black; font-family: Arial, sans-serif; font-size: 13px; margin: 0.5em 0em; width: 100%px;" summary=""><thead valign="bottom"><tr valign="bottom"><th align="left" id="wq122" style="background-color: #dadada; font-size: 0.7em; padding: 0.1em 1em 0.3em;">Member</th><th align="left" id="wq123" style="background-color: #dadada; font-size: 0.7em; padding: 0.1em 1em 0.3em;">Value</th></tr></thead><tbody valign="top"><tr><td headers="wq122" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address.street_no</tt></td><td headers="wq123" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">44</tt></td></tr><tr><td headers="wq122" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address.street_name</tt></td><td headers="wq123" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;">address of string&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">"Knyvet Ave."</tt></td></tr><tr><td headers="wq122" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address.city</tt></td><td headers="wq123" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;">address of string&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">"Hamilton"</tt></td></tr><tr><td headers="wq122" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address.prov</tt></td><td headers="wq123" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;">address of string&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">"Ontario"</tt></td></tr><tr><td headers="wq122" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;"><tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address.postal_code</tt></td><td headers="wq123" style="font-size: 0.7em; padding: 0.1em 1em 0.3em;">Depends on the storage class of the&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address</tt>&nbsp;variable; if it is static, the value would be&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">NULL</tt>.</td></tr></tbody></table><div class="qualifstart" style="border-left-style: solid; border-right-style: solid; border-top-style: solid; border-width: thin; font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; margin-bottom: 0.2em; margin-top: 0.2em; padding: 0.1em 0.5em 0.5em; text-align: center;">C only</div><div style="font-family: Arial, sans-serif; font-size: 13px;">To initialize only the third and fourth members of the&nbsp;<tt class="xph" style="font-family: 'Courier New', Courier, monospace;">temp_address</tt>&nbsp;variable, you could use a designated initializer list, as follows:</div><pre class="xmp" style="background-color: #dadada; font-family: 'Courier New', Courier, monospace; font-size: 13px; margin-left: 30px; margin-right: 30px; padding: 3px;">struct address {<br />                 int street_no;<br />                 char *street_name;<br />                 char *city;<br />                 char *prov;<br />                 char *postal_code;<br />               };<br />struct address temp_address =<br />               { .city = "Hamilton", .prov = "Ontario" };</pre><div class="indatacontent" style="font-family: Arial, sans-serif; font-size: 13px;"><a href="" name="wq118"></a><span style="background-color: white;"></span><a href="" name="wq121"></a><span style="background-color: white;"></span><a href="" id="idx442" name="idx442"></a><a href="" id="idx443" name="idx443"></a><a href="" id="idx444" name="idx444"></a><span style="background-color: white;"></span></div><div class="qualifend" style="-webkit-text-stroke-width: 0px; border-bottom-style: solid; border-left-style: solid; border-right-style: solid; border-width: thin; color: black; font-family: Arial, sans-serif; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; margin-bottom: 0.2em; orphans: auto; padding: 0.5em 0.5em 0.1em; text-align: center; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px;">End of C only</div><br /><div style="font-family: Arial, sans-serif; font-size: 13px;"><br /></div></div>
